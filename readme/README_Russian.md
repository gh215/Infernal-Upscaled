Этот мод заменяет оригинальные текстуры игры **Indiana Jones and the Infernal Machine** улучшенными текстурами, созданными с помощью ИИ-апскейлинга. Цель — повысить визуальное качество игры на современных дисплеях.

## ⚠️ Дисклеймер

*   **Права:** Оригинальные ассеты и сама игра Indiana Jones and the Infernal Machine являются собственностью их правообладателей (Lucasfilm Games / Disney и т.д.). Я не претендую на владение оригинальными материалами. Этот мод является производной работой.
*   **Использование:** Данный пакет текстур предоставляется «как есть» (as-is) исключительно для личного, некоммерческого использования фанатами игры, которые владеют легальной копией Indiana Jones and the Infernal Machine.
*   **Ответственность:** Вы используете эти текстуры на свой страх и риск. Автор мода не несет ответственности за возможные проблемы с игрой или вашим компьютером.
*   **Распространение:** Запрещается любое коммерческое использование этих улучшенных текстур. При распространении мода или его производных версий (если разрешено) обязательно указывайте автора апскейла и сохраняйте некоммерческий характер.
*   **Статус:** Автор мода не связан с разработчиками или издателями игры.

---

## Содержание

*   [Требования](#требования)
*   [Подготовка: Распаковка ресурсов игры](#подготовка-распаковка-ресурсов-игры)
*   [Установка мода](#установка-мода)
    *   [Шаг 1: Установка текстур](#шаг-1-установка-текстур)
    *   [Шаг 2: Установка движка OpenJones3D (Необходимо)](#шаг-2-установка-движка-openjones3d-необходимо)
    *   [Шаг 3: Патчинг исполняемого файла (Downgrade)](#шаг-3-патчинг-исполняемого-файла-downgrade)
    *   [Шаг 4: Установка dgVoodoo (Рекомендуется)](#шаг-4-установка-dgvoodoo-рекомендуется)
*   [Инструменты и Благодарности](#инструменты-и-благодарности)
*   [Полезные ссылки](#полезные-ссылки)
*   [Дополнительно: Готовая сборка](#дополнительно-готовая-сборка)

---

## Требования

*   Легальная копия игры **Indiana Jones and the Infernal Machine**.
*   **Распакованные ресурсы игры.** См. раздел [Подготовка](#подготовка-распаковка-ресурсов-игры) ниже.

---

## Подготовка: Распаковка ресурсов игры

Прежде чем устанавливать какие-либо моды, включая этот, вам необходимо извлечь (распаковать) игровые архивы (`.gob` файлы) в папке `Resource`.

**Есть два основных способа это сделать:**

1.  **Ручной способ:** Следуйте подробной инструкции на GitHub сообщества Jones3D:
    [Инструкция по распаковке ресурсов](https://github.com/Jones3D-The-Infernal-Engine/Documentation/blob/main/pre-mod.md)
    *(Этот метод требует использования утилит `gobext` и `cndtool` от Urgon).*

2.  **С помощью Indy3DModInstaller:** Используйте утилиту от the_kovic, которая автоматизирует процесс. Это обычно быстрее и удобнее.
    *   Скачать: [Indy3DModInstaller](https://github.com/thekovic/Indy3DModInstaller)
    *   Запустите программу установки, следуя её инструкциям, указанным в *README*.

**Важно:** После распаковки оригинальные файлы `CD1.gob`, `CD2.gob` и `JONES3D.gob` больше не будут использоваться игрой напрямую. Вместо них игра будет читать файлы из папок внутри `Resource`.

---

## Установка мода

### Шаг 1: Установка текстур

После того как ресурсы игры распакованы:

1.  **Скачайте** архив с моими AI-апскейл текстурами из этого репозитория.
2.  **Выберите способ установки:**
    *   **Через Indy3DModInstaller:** Если вы используете этот инсталлятор, укажите ему путь к скачанному архиву с текстурами. Он должен корректно разместить файлы.
    *   **Вручную:** Распакуйте архив с текстурами. Скопируйте папку `mat` из архива в папку `Resource` вашей игры, соглашаясь на замену файлов при появлении запроса.
3.  После успешной установки текстур вам нужно выбрать языковой пакет из папки `localizations` в репозитории. Выбрав папку с языком, вам останется только перетащить все файлы в папку `Resource`.

### Шаг 2: Установка движка OpenJones3D (Необходимо)

Стандартный запуск игры с распакованными ресурсами возможен только в режиме разработчика (см. Toggle Dev Mod в Indy3DModInstaller), иначе игра будет просить диск. Чтобы обойти это, настоятельно рекомендуется установить **OpenJones3D** — современный открытый движок для игры от Urgon.

1.  Перейдите на страницу репозитория [OpenJones3D](https://github.com/smlu/OpenJones3D).
2.  Загрузите последнюю версию (обычно это zip-архив). Или вы можете скачать последнюю версию через `Releases`.
3.  **Извлеките содержимое скачанного архива** прямо в папку `Resource`, соглашаясь на замену файлов.

### Шаг 3: Патчинг исполняемого файла (Downgrade)

OpenJones3D требует, чтобы оригинальный исполняемый файл игры (`Indy3D.exe`) был понижен (downgraded) до версии 1.0.

1.  **Найдите файлы для даунгрейда:** В файлах этого репозитория должна быть папка `downgrade-file`, содержащая файлы `.bps`. Их загрузка зависит от того, где вы купили игру (`Steam` или `GOG`).
2.  **Перейдите на сайт RomPatcher.js: [https://www.marcrobledo.com/RomPatcher.js/](https://www.marcrobledo.com/RomPatcher.js/)
3.  В поле «ROM file» (сверху) загрузите ваш **оригинальный** файл `Indy3D.exe` из папки `Resource`.
4.  В поле «Patch file» (снизу) загрузите скачанный `.bps` файл патча.
5.  Нажмите кнопку «Apply patch». Сайт предложит скачать пропатченный файл.
6.  **Сохраните** скачанный файл.
7.  **Переименуйте** скачанный пропатченный файл в `Indy3D.exe`.
8.  **Скопируйте** этот переименованный `Indy3D.exe` в папку `Resource`, **заменив** существующий там файл. *Старый `Indy3D.exe` можно удалить или сохранить как бэкап.*

**⚠️ ВАЖНО:** Убедитесь, что новый, пропатченный файл называется именно `Indy3D.exe` и находится в папке `Resource`. Иначе OpenJones может его не распознать. Теперь вы можете запускать игру через `Jones3D.exe` из папки `Resource`.

### Шаг 4: Установка dgVoodoo (Рекомендуется)

Даже с OpenJones вы можете столкнуться с долгими загрузками или фризами. Это часто решается использованием враппера **dgVoodoo2**.

1.  **Скачайте dgVoodoo2:** С официального сайта [dgVoodoo2](http://dege.freeweb.hu/dgVoodoo2/dgVoodoo2/). Вам нужна версия *dgVoodoo v2.86.1*.
2.  **Установите:** Следуйте инструкции по установке dgVoodoo для Infernal Machine. Отличное руководство есть в Steam:
    [Руководство по установке dgVoodooCpl](https://steamcommunity.com/sharedfiles/filedetails/?id=3281746272)
    *   *Кратко: Скопируйте `dgVoodooCpl.exe`, `dgVoodoo.conf` и файлы из папки `MS\x86` архива dgVoodoo в папку `Resource`.*
3.  **Настройте:** Вы можете использовать мою конфигурацию `dgVoodoo.conf`, которая расположена в папке `dgvoodoocpl-config`, и скопировать ее в папку `Resource` с заменой, или настроить параметры самостоятельно через `dgVoodooCpl.exe`.

**Результат:** После выполнения этих шагов игра должна запускаться через `Jones3D.exe` (в папке `Resource`), использовать OpenJones3D, отображать улучшенные текстуры и работать значительно быстрее и стабильнее благодаря dgVoodoo.

---

**⚠️ ОЧЕНЬ ВАЖНО:** Пожалуйста, проверьте папку ndy в `Resource`, и если там остались `.cnd` файлы, то ваш мод будет работать только на 0.1%, так как игра всё ещё продолжает использовать старые текстуры из `.cnd` файлов. Indy3DModInstaller с версии 2.2 позволяет безопасно и правильно распаковать `.cnd` файлы в `.ndy`.

---

## Инструменты и Благодарности

Этот мод и его установка стали возможны благодаря следующим инструментам и людям:

*   **Апскейлинг:**
    *   Основные текстуры: [Phips/Upscaler](https://huggingface.co/spaces/Phips/Upscaler) на Hugging Face.
    *   Восстановление лиц: [doevent/Face-Real-ESRGAN](https://huggingface.co/spaces/doevent/Face-Real-ESRGAN) на Hugging Face.
*   **Инструменты для моддинга:**
    *   `cndtool`, `matool`, `gobext`: [Urgon (smlu)](https://github.com/smlu/Urgon) — незаменимые утилиты для работы с ресурсами игры.
    *   `Indy3DModInstaller`: [the_kovic](https://github.com/thekovic) — удобный установщик модов.
*   **Движок:**
    *   `OpenJones3D`: [Urgon (smlu)](https://github.com/smlu/OpenJones3D) — современный движок для запуска игры.
*   **Графика и Совместимость:**
    *   `dgVoodoo2`: [Dege](http://dege.freeweb.hu/dgVoodoo2/dgVoodoo2/) — враппер DirectX для улучшения совместимости и производительности.

---

## Полезные ссылки

*   [Распаковка ресурсов игры (Jones3D Docs)](https://github.com/Jones3D-The-Infernal-Engine/Documentation/blob/main/pre-mod.md)
*   [Indy3DModInstaller (the_kovic)](https://github.com/thekovic/Indy3DModInstaller)
*   [Утилиты Urgon (gobext и др.)](https://github.com/smlu/Urgon)
*   [OpenJones3D Engine (Urgon)](https://github.com/smlu/OpenJones3D)
*   [RomPatcher JS (Онлайн-патчер)](https://www.marcrobledo.com/RomPatcher.js/)
*   [dgVoodoo2 (Сайт)](http://dege.freeweb.hu/dgVoodoo2/dgVoodoo2/)
*   [Руководство по установке dgVoodoo (Steam)](https://steamcommunity.com/sharedfiles/filedetails/?id=3281746272)
*   [Сообщество Jones3D - The Infernal Engine (Моды, Документация)](https://github.com/Jones3D-The-Infernal-Engine)
*   [Фикс для двуручного оружия](https://github.com/thekovic/Indy3D-TwoHandFix)

---

## Дополнительно: Готовая сборка

Для тех, кто хочет получить полностью настроенную игру с этим модом, русской локализацией, ReShade и улучшенным HD-шрифтом, я подготовил готовую конфигурацию папки `Resource`.

**Ссылка:** [Google Drive Папка](https://drive.google.com/drive/folders/1aJIOP9-TznFZM4WOWVmuPFvCxx4Twzz2?usp=sharing)

**⚠️ ВАЖНО:** На Google Drive находятся две папки:
1.  `Resource_With_Custom_Level`: Содержит всё вышеперечисленное + дополнительный кастомный уровень от сообщества ([Оригинал уровня](https://github.com/Jones3D-The-Infernal-Engine/Mods)).
2.  `Resource_Base`: Содержит всё вышеперечисленное без дополнительного уровня.

**Инструкция для готовой сборки:**
**⚠️ ВАЖНО:** Игра модифицировалась на платформе GOG: я не могу предсказать, как поведёт себя игра в Steam. Будьте осторожны и делайте бэкапы.
1.  Удалите папку `Resource` из корневой папки.
2.  Скачайте содержимое одной из папок с Google Drive.
3.  Поместите скачанную папку в корневую папку игры.
